const scriptName = "1.1.4";
/**
 * ë”°ê¼¬ë´‡ Controller
 * @param msg
 * @return replier.reply(msg)
 * @version 1.1.4
 */
 var startBot = true;
function response(room, msg, sender, isGroupChat, replier, imageDB, packageName) {
  
   if(msg == '/ê³µì§€')   replier.reply(fnNotice("A"));   
   else if(msg == '/ê¸´ê¸‰ê³µì§€')   replier.reply(fnNotice("B")); 
   else if(msg == '/ë”°ê¼¬ë´‡')   replier.reply(rainbowBot());
   else if(msg.indexOf("/") == 0 && 
      (msg.indexOf("/ì…ë ¥") != -1 
         || msg.indexOf("/í‚¬") != -1
         || msg.indexOf("/ì „ì²´ì‚­ì œ") != -1
         || msg.indexOf("/ì‚­ì œ") != -1
         || msg.indexOf("/ë³´ìŠ¤") != -1))   replier.reply(mvpBossFn(msg));
   else if(msg.indexOf("/") == 0 && msg.indexOf("/ë°˜ë³µ") != -1)   replier.reply(scheduleStart(msg));      
   else if(msg.indexOf("/") == 0 && msg.indexOf("/ì‹ ì²­") != -1)   replier.reply(guildPvpFn(msg, sender));
   else if(msg.indexOf("/") == 0 && msg.indexOf("/ê¸¸ë§¤ìƒëŒ€") != -1) {
      guild = guildPvpmatch(msg);
      pvpguild = guild.pvpguild;
      text = guild.text;
      replier.reply(text);}
  else if(msg.indexOf("/íŒ¨ì¹˜ë…¸íŠ¸") != -1) replier.reply(patchNote());
   else if(msg.indexOf("/") == 0){
      var chk = chkFnTm(sender);
      if(chk != ""){
         replier.reply(chk);  
      }else{
         replier.reply(guildMsg(msg));
      }
   }

    
   if(startBot){   
      setInterval(function() {
         if(mvpBoss.length >= 1){
            var siren = setMvpNotice();
            if(siren != "") replier.reply(siren);
         }
         
         var siren1 = setCalendarNotice1();
         if(siren1 != "") replier.reply(siren1);   

         var siren2 = setCalendarNotice2();
         if(siren2 != "") replier.reply(siren2);      
      }, 60000);
      startBot = false;
   }
}

/**
 * === ê³µì§€ì‚¬í•­ ========================================
 * ëª…ë ¹ì–´ : /ê³µì§€
 * ëª…ë ¹ì–´ : /ê¸´ê¸‰ê³µì§€
 */
function fnNotice(type) {
   if(type == "A"){      
      var msg = "ğŸŒˆ2021ë…„ Rainbowê³µì§€ğŸŒˆ\n";
         msg += "â€˜ê³µì§€â€™ë°© ì±„íŒ… ë˜ë„ë¡ ìì œí•´ì£¼ì„¸ìš”!\n\n";
         
         msg += "*ê¸°ë³¸ì ì¸ ì˜ˆì˜ë¡œ ìƒëŒ€ë°©ì„ ë°°ë ¤í•´ì£¼ì„¸ìš” â˜ºï¸\n\n";
         msg += "- ì›”ì°½ ë¶„ìŸ ì‚¼ê°€ê¸°\n";
         msg += "- ê¸¸ë“œë‚´ ìš•ì„¤, ê³µê²©ì  ì–¸í–‰ ì‚¼ê°€ê¸°\n";   
         msg += "- íƒ€ ì§ì—… ë¹„êµ ë° ì–¸ê¸‰ ë°°ë ¤í•˜ê¸°\n";
         msg += "- ì§€ë‚˜ì¹œ ì¢…êµ, ì •ì¹˜ì  ì–¸ìŸ ì‚¼ê°€ê¸°\n\n\n";
         
         msg += "1)ğŸŒˆê³µì„±ì „\n";
         msg += "*ë§¤ì£¼ ì¼ìš”ì¼ ì˜¤í›„ 5ì‹œê¹Œì§€\n";         
         msg += "íˆ¬í‘œ ë° 1:1 ë¡œ ì°¸ì—¬ì˜ì‚¬\n\n";
         msg += "*ì¼ìš”ì¼20:30 ë¶„ê¹Œì§€ ì ‘ì†í•˜ì…”ì•¼ ì •í•´ì§„ íŒŒí‹°êµ¬ì„±ê°€ëŠ¥í•˜ì˜¤ë‹ˆ, ì°¸ì—¬ë¥¼ í‘œí•˜ì‹ ë¶„ì€ ëŠ¦ì§€ì•Šê²Œ ì ‘ì†í•´ì£¼ì„¸ìš”.\n";
         msg += "(ëŠ¦ìœ¼ì‹œë©´ ë‹¤ë¥¸ íŒŒí‹°ì›ìœ¼ë¡œ êµì²´)\n\n";
         
         msg += "â­ï¸ ê³µì„±ì „ ì´ê·¸ì—´ë§¤ ì‚¬ìš©ê°€ëŠ¥\n";
         msg += "â­ï¸ ê°€ëŠ¥í•˜ì‹ ë¶„ì€ ë””ìŠ¤ì½”ë“œ ì²­ì·¨ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\n";
         msg += "(https://discord.gg/rCC9ZFbXpY)\n\n\n";
         
         msg += "2)ğŸŒˆê¸¸ë“œì‚¬ëƒ¥ 2 íšŒ\n\n";
         msg += "*ë§¤ì£¼ ê¸ˆìš”ì¼,í† ìš”ì¼ 19:30-23:30 ë¶„\n";                  
         msg += "*í•˜ë“œ1íšŒ+ë…¸ë©€1íšŒ ê¸°ì¤€\n\n\n";
         
         msg += "3)ğŸŒˆê¸¸ë“œ í”¼ê³ ëª© ë„ê° íŒŒí‹°\n\n";
                  msg += "*ë§¤ì£¼ ì¼ìš”ì¼ 19:30 ,ëª¨ë¡œí¬ì„œë¶€ 1ì‹œ\n";
         msg += "*<í”¼ë¬»ì€ ê³ ëª©ê°€ì§€>2ê°œ ì§€ì°¸\n";
         msg += "*ì¸ì›ì´ ë§ì€ë§Œí¼ ì§„í–‰ìì˜ ë§ì— ì˜ ë”°ë¼ì£¼ì‹œê¸¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\n\n\n";
		 msg += "@@@ ì ì‹œ ì‰¬ì–´ê°‘ë‹ˆë‹¤. ë‹¤ì‹œ ëŒì•„ì˜¤ê² ìŠµë‹ˆë‹¤ @@@"
         
         msg += "4)ğŸŒˆë¶€ìº ê¸¸ë“œ\n";
         msg += "* ë¶€ìº ê¸¸ë“œëŠ” í¸ì˜ìƒ â€˜í´ë¡œë²„â€™ ì¶”ì²œìœ¼ë¡œ í†µì¼ í•˜ê² ìŠµë‹ˆë‹¤. ì–‘í•´ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\n\n\n";
         
         msg += "5)ğŸŒˆíƒ€ì¸ì˜ í”¼ê³ ëª©ì„ ì¹˜ëŠ”í–‰ìœ„ëŠ” ìì œí•´ ì£¼ì‹­ì‹œì˜¤.\n\n";      
         
         msg += "6)ğŸŒˆì‚¬ëƒ¥ë²”ìœ„ ì²´í¬ë¡œ ê²¹ì‚¬ë¥¼ ë°©ì§€í•´ì£¼ì„¸ìš” !\n\n";
         
         msg += "7)ğŸŒˆë¯¸ì ‘ì† 7 ì¼ ê¸°ì¤€ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.\n";
         msg += "(ë¯¸ë¦¬ ì•Œë ¤ì¤„ì‹œ ì—°ì¥ê°€ëŠ¥)\n\n";
         
         msg += "*ê¸°íƒ€ ë¬¸ì˜ì‚¬í•­ì€ ì¸ê²Œì„ë‚´ ë°±ì„¤ê¸°,í‘ì„¤ê¸°ë¡œ 1:1 ì£¼ì‹œê±°ë‚˜ ì˜¤í”ˆí†¡ë°© ë°±ì„¤ê¸° í”„ë¡œí•„ì„ ëˆ„ë¥´ì‹œë©´ ê°œì¸ ì±„íŒ…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤ !\n\n";
         msg += "";
      return msg;
   }else if(type == "B"){
      var msg2 = "";
      return msg2;   
   }   
}

/**
 * === ë ˆì¸ë³´ìš°ë´‡ ëª…ë ¹ì–´ ========================================
 * ëª…ë ¹ì–´ : /ë ˆì¸ë³´ìš°ë´‡
 */
function rainbowBot() {   
   var txt = "===== ğŸŒˆ ê°€ëŠ¥í•œ ëª…ë ¹ì–´ ğŸŒˆ ===== \n";
      txt += "/ê³µì§€ : ê¸¸ë“œê³µì§€ì‚¬í•­ \n\n";
      txt += "/OOOO : ë‹¹ì‹ ì—ê²Œ ì ì ˆí•œ ì‘ë‹µì„~ \n";
      txt += "ex)/ë”°ê¼¬ \n\n";
      txt += "/ì…ë ¥@ë³´ìŠ¤ëª…@ë‚¨ì€ì‹œê°„(ë¶„) : ë‚¨ì€ì‹œê°„ ê³„ì‚°í•˜ì—¬ 5ë¶„ì „ì— ì•Œë¦¼~ \n";         
      txt += "ex) /ì…ë ¥@ë„í”Œ.ê¸¸ë“œ@120 \n";
      txt += "ex) ë³´ìŠ¤ëª…ì— 'ì›”ë“œ' ë˜ëŠ” 'MVP' ë¥¼ í•¨ê»˜ ì…ë ¥í•˜ë©´ 10ë¶„ì „ì— ì•Œë¦¼~ \n\n";
      txt += "/í‚¬@ë³´ìŠ¤ëª… : ë‹¤ìŒ ë¦¬ì  ì‹œê°„ 5ë¶„ì „ì— ì•Œë¦¼~ \n";
      txt += "ex) /ë³´ìŠ¤í‚¬@ë„í”Œ.ì›”ë“œ \n\n";
      txt += "/ë³´ìŠ¤ : ì•Œë¦¼ ë“±ë¡ëœ ë³´ìŠ¤/ì‹œê°„ í™•ì¸ \n";
      txt += "ex) /ë³´ìŠ¤ \n\n";
      txt += "";
      txt += "";
      txt += "ğŸŒˆ ì œì‘ : ì•„ì°Œë¦¬, ë”°ê¼¬\n";
      txt += "ğŸŒˆ ver 1.1.4\n";  
   return txt;
}

   /**
 * === ì‘ë‹µë©”ì‹œì§€ ========================================
 * ëª…ë ¹ì–´ : /ë”°ê¼¬
 */
function guildMsg(nickName) {
   var msgDeef = [
         "ë­ë¼ê³  ëŒ€ë‹µí•´ì•¼ ë˜ì£ ?", 
         "ì´ìƒí•œ ë§ì”€ í•˜ì§€ë§ˆì„¸ìš”!", 
         "??????", 
         "ë„¤? ë‹¤ì‹œ ë§í•´ì£¼ì„¸ìš”", 
         "......??!",
         "ë”°ê¼¬ë´‡ì€ ë§ŒëŠ¥ì´ ì•„ë‹™ë‹ˆë‹¤.. ã… ",
         "ëª¨ë¥´ê² ìŠµë‹ˆë‹¤;;",
         "í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°–ê³  ì‹¶ë„¤ìš”..",
         "ë•¡.. ì˜ ì¢€ í•´ë´ìš”..",
         "ë·€",
         "(ì‘¥ìŠ¤)", "(ì‹¬ê°)", "(ì”¨ìµ)", "(ê¹œì§)", "(í˜ë“¦)", "(ì •ìƒ‰)", "(í‘í‘)",
         "(ë½€ë½€)", "(í¥)", "(í—ˆê±±)", "(êµ¿)", "(ë©˜ë¶•)", "(í—‰)"
      ];
   var msg = msgDeef[Math.floor(Math.random() * msgDeef.length)];
   
   var today = new Date();
   if(nickName == '/ì§€ê¸ˆ')         msg = "ì§€ê¸ˆì€ "+today.getHours()+"ì‹œ "+today.getMinutes()+"ë¶„ ì…ë‹ˆë‹¤.";
   else if(nickName == '/ì˜¤ëŠ˜')      msg = "ì˜¤ëŠ˜ì€ "+today.getFullYear()+"ë…„ "+(today.getMonth()+1)+"ì›” "+today.getDate()+"ì¼ ì…ë‹ˆë‹¤.";
   else if(nickName == '/ì•¼')      msg = "ì™œ?!";
   else if(nickName == '/ë„ˆ')      msg = "ëª¨?!";
   else if(nickName == '/ìš°ì”¨')      msg = "ë©”ë¡±~";
   else if(nickName == '/ê³ ë§ˆì›Œ')   msg = "(ì‘¥ìŠ¤)";        
   else if(nickName == '/ì‚¬ë‘í•´')   msg = "(ë½€ë½€)";        
   else if(nickName == '/ë”°ê¼¬'){
      var txt = [
         "ë”°ê¼¬ê°€ ì ¤ ì¡°ì•„", 
         "ë„¤~?", 
         "(ì•„ì‰)", 
         "ì™œë¶ˆëŸ¬?", 
         "ì‘?",
         "ì„¸ì ¤ì˜ˆ ë©‹ì¨ ëŒ€ì¥ë‹˜ ì‚¬ë‘í•´ìš” â¤",
         "ë˜¥...",
         "ë°”ë³´ë©ì¶©ì´"
      ];
      msg = txt[Math.floor(Math.random() * txt.length)];
   }      
      else if(nickName == "/ë ˆì¸ë³´ìš°")      msg = "ë°±ì„¤ê¸° ì¶©ì„±ì¶©ì„±";
   else if(nickName == "/ë°±ì„¤ê¸°")      msg = "ì„¸ì ¤ì˜ˆ ë©‹ì¨ ëŒ€ì¥ë‹˜ ì‚¬ë‘í•´ìš” â¤";
   else if(nickName == "/ì¿ ì´ë‚˜")      msg = "ì¿ ì´í˜• ì„¸ê³„ ìµœê³ !";
   else if(nickName == "/ë¿…ë¿…")         msg = "(ì†Œ)ê³ ê¸°ì‚¬ì¤„ë©‹ìˆëŠ”í˜•";
   else if(nickName == "/ì•„ì°Œë¦¬") msg = "ë”°ê¼¬ë´‡ì˜ ì•„ë²„ì§€!!!!!11 ì •ë‹µì„ ì•Œë ¤ì¤˜!!!!1";
   else if(nickName == "/ê¹€ë”°ë¸”") msg = "í¬í’ì™•";
   else if(nickName == "/CHIC" || nickName == "/chic" || nickName == "/ì¹¡") msg = "ì•„ë°•ê¼¼(ì•„ìˆ˜ë¼ ë°•ê³  ê¼¼ì¥ì–´)";
   else if(nickName == "/ê³ ì–‘2" || nickName == "/ê³ ì–‘ì´" || nickName == "/ì–‘ì´") {
      var txt = [
         "ì•¼ì˜¹ì•¼ì˜¹~",
         "ë¯¸ì•¼ì˜¹",
         "ì•¼ì˜¹?",
         "ëƒ¥ëƒ¥",
         "meow~"
      ];
      msg = txt[Math.floor(Math.random() * txt.length)];
   }
   
   return msg;
}   

/**
 * === ë„ë°°ê¸ˆì§€ ========================================
 */
var jokeNum1 = 0;
var jokeNum2 = 0;
var beforFnTime = null;
var beforFnSender = null;
function chkFnTm(sender) {
   var txt = [
      "â¤â¤â¤ì±„íŒ…ì°½ ë„ë°°ëŠ” ì‚¼ê°€í•´ì£¼ì„¸ìš”â¤â¤â¤"
      , "â¤â¤â¤ì±„íŒ…ì°½ ë„ë°°ëŠ” ì‚¼ê°€í•´ì£¼ì„¸ìš”â¤â¤â¤"
      , "â¤â¤â¤ì±„íŒ…ì°½ ë„ë°°ëŠ” ì‚¼ê°€í•´ì£¼ì„¸ìš”â¤â¤â¤"
      , "â¤â¤â¤ì±„íŒ…ì°½ ë„ë°°ëŠ” ì‚¼ê°€í•´ì£¼ì„¸ìš”â¤â¤â¤"
   ];
   
   if(beforFnSender == null) beforFnSender = sender;
   var nowFnSender = sender;
   if( nowFnSender == beforFnSender )    jokeNum2++;
   else    jokeNum2 = 0;
   beforFnSender = sender;
   
   if(beforFnTime == null) beforFnTime = new Date();   
   var nowFnTime = new Date();
   var chk = nowFnTime.getTime() - beforFnTime.getTime();
   if( (chk/1000) <= 10 )    jokeNum1++;
   else    jokeNum1 = 0;
   beforFnTime = new Date();
   
      if(jokeNum2 >= 8){
      return "(ì§œì¦)";
   }else if(jokeNum2 >= 5){
      return nowFnSender+"ë‹˜ ì €ë¥¼ ë„ˆë¬´ ì°¾ìœ¼ì‹œëŠ”ê±° ì•„ë‹Œê°€ìš”?";
   }else{
      return "";
   }
   
   if(jokeNum1 >= 8){
      return "(ì§œì¦)";
   }else if(jokeNum1 >= 5){
      return txt[Math.floor(Math.random() * txt.length)];
   }else{
      return "";
   }
}

/**
 * === ë³´ìŠ¤ ========================================
 * ëª…ë ¹ì–´ : /ì…ë ¥@ë“œë¼@120
 * ëª…ë ¹ì–´ : /í‚¬@ë“œë¼
 * ëª…ë ¹ì–´ : /ì „ì²´ì‚­ì œ
 * ëª…ë ¹ì–´ : /ì‚­ì œ@ë“œë¼
 * ëª…ë ¹ì–´ : /ë³´ìŠ¤
 */
var mvpBoss = [];
function mvpBossFn(msg) {   
   var txt = msg.split("@");
   if(msg.indexOf("/ì…ë ¥") != -1){      
       if(txt.length == 3){
         for(j=0; j<mvpBoss.length; j++){
            var sub = mvpBoss[j];
            if(sub.name == txt[1]){
                  return "ë³´ìŠ¤ ["+txt[1]+"] ëŠ” ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆë„¤ìš”~";
            }   
         }
          var setTime = new Date();
            setTime.setMinutes(setTime.getMinutes() + Number(txt[2]));          
          var list = {
             name : txt[1]
             , YY : setTime.getFullYear()
             , MM : setTime.getMonth()+1
             , DD : setTime.getDate()
             , HH : setTime.getHours()
             , SS : setTime.getMinutes()
          };
          mvpBoss.push(list);
         return "ë³´ìŠ¤ ["+txt[1]+"] \nì•Œë¦¼ì‹œê°„ : "+setTime.getHours()+"ì‹œ "+setTime.getMinutes()+"ë¶„ ë“±ë¡!";
      }else{
           return "ë­ í•œê°œ ë¹ ì§„ê²ƒ ê°™ì§€ ì•Šë‚˜ìš©? +_+ \n ì…ë ¥ë°©ë²• => /ì…ë ¥@ë³´ìŠ¤ëª…@ë‚¨ì€ì‹œê°„(ë¶„)";
        }
   }else if(msg.indexOf("/í‚¬") != -1){
       if(txt.length == 2){
         for(j=0; j<mvpBoss.length; j++){
            var sub = mvpBoss[j];
            if(sub.name == txt[1]){
               return "ë³´ìŠ¤ ["+txt[1]+"] ëŠ” ì´ë¯¸ ë“±ë¡ë˜ì–´ ìˆë„¤ìš”~";
            }   
         }
          var setTime = new Date();
            setTime.setMinutes(setTime.getMinutes() + 120);          
          var list = {
             name : txt[1]
             , YY : setTime.getFullYear()
             , MM : setTime.getMonth()+1
             , DD : setTime.getDate()
             , HH : setTime.getHours()
             , SS : setTime.getMinutes()
          };
          mvpBoss.push(list);
         return "ë³´ìŠ¤ ["+txt[1]+"] \nì•Œë¦¼ì‹œê°„ : "+setTime.getHours()+"ì‹œ "+setTime.getMinutes()+"ë¶„ ë“±ë¡!";
      }else{
           return "ë­ í•œê°œ ë¹ ì§„ê²ƒ ê°™ì§€ ì•Šë‚˜ìš©? +_+ \n ì…ë ¥ë°©ë²• => /í‚¬@ë³´ìŠ¤ëª…";
        }
   }else if(msg.indexOf("/ì „ì²´ì‚­ì œ") != -1){
      mvpBoss = [];
         return "ì „ì²´ì‚­ì œì™„ë£Œ";
   }else if(msg.indexOf("/ì‚­ì œ") != -1){
      if(txt.length == 2){
         for(j=0; j<mvpBoss.length; j++){
            var sub = mvpBoss[j];
            if(sub.name == txt[1]){
               mvpBoss.splice(j, 1);
               return "ë³´ìŠ¤ ["+txt[1]+"] ëŠ” ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.";
            }   
         }
      }else{
           return "ë­ í•œê°œ ë¹ ì§„ê²ƒ ê°™ì§€ ì•Šë‚˜ìš©? +_+ \n ì…ë ¥ë°©ë²• => /ì‚­ì œ@ë³´ìŠ¤ëª…";
        }
   }else if(msg.indexOf("/ë³´ìŠ¤") != -1){
         if(mvpBoss.length <= 0){
            return "ì„¤ì •ëœ ë³´ìŠ¤ íƒ€ì„ì´ ì—†ë„¤ìš”..";
         }else{
            if(mvpBoss.length >= 1) {
             var conts = "==================\n";
             for(j=0; j<mvpBoss.length; j++){
                var sub = mvpBoss[j];
                conts += "ë³´ìŠ¤ : ["+sub.name+"] \në¦¬ì  ì‹œê°„ : "+sub.HH+"ì‹œ "+sub.SS+"ë¶„\n";
               conts += "==================\n";
            }
             return conts;
         }
      }      
   }
   return "ì˜ëª»ì…ë ¥í•˜ì‹ ê±° ê°™ì•„ìš”..";   
}
   /**
 * === ë³´ìŠ¤ì•Œë¦¼ ========================================
 */
function setMvpNotice(){   
   if(mvpBoss.length >= 1){
      for(j=0; j<mvpBoss.length; j++){
         var sub = mvpBoss[j];
         var nowTime = new Date();
         var setTime = new Date(sub.YY, sub.MM-1, sub.DD, sub.HH, sub.SS, 0);
         var chk = setTime.getTime() - nowTime.getTime();
         chk = chk/1000/60; 
            if(chk <= 6){
            var conts = "ë˜‘ë˜‘! ì•Œë ¤ë“œë¦½ë‹ˆë‹¤~\n";
               conts += "====== ë³´ìŠ¤íƒ€ì„ ======\n";
               conts += "ë¦¬ì  ì‹œê°„ " + parseInt(chk) + "ë¶„ì „ ì…ë‹ˆë‹¤. \nì¤€ë¹„í•˜ì„¸ìš”~\n\n";
               conts += "["+sub.name+"] \në¦¬ì  ì‹œê°„ : "+sub.HH+"ì‹œ "+sub.SS+"ë¶„\n";
            mvpBoss.splice(j, 1);
            return conts;
         }else if(chk <= 11 && (sub.name.indexOf("ì›”ë“œ") != -1 || sub.name.indexOf("MVP") != -1)){
            var conts = "ë˜‘ë˜‘! ì•Œë ¤ë“œë¦½ë‹ˆë‹¤~\n";
               conts += "====== ë³´ìŠ¤íƒ€ì„ ======\n";
               conts += "ë¦¬ì  ì‹œê°„ " + parseInt(chk) + "ë¶„ì „ ì…ë‹ˆë‹¤. \nì¤€ë¹„í•˜ì„¸ìš”~\n\n";
               conts += "["+sub.name+"] \në¦¬ì  ì‹œê°„ : "+sub.HH+"ì‹œ "+sub.SS+"ë¶„\n";
            mvpBoss.splice(j, 1);   
            return conts;
         }   
      }
   }
   return "";
}
   /**
 * === ì´ë²¤íŠ¸ & ì¼ì • ì•Œë¦¼ ========================================
 */
var week = new Array('ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ');
var CalendarList1 = [
   {name: "ê¸¸ë“œë§¤ì¹­ì „",       start: "Y", AA: 30, BB: "ì¼ì •", LL: "ìˆ˜",    HH: 20, SS: 30, contents: "ì°¸ì„ì¸ì›ì€ 20ë¶„ê¹Œì§€ëŠ” ì ‘ì†ì„ ê¼­ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\n 9ì‹œ ì‹œì‘ì´ë©°, 50ë¶„ê¹Œì§€ ì°¸ê°€ì‹ ì²­ì„ í•´ì•¼í•©ë‹ˆë‹¤."}
   ,{name: "ê¸¸ë“œì‚¬ëƒ¥",       start: "Y", AA: 10, BB: "ì¼ì •", LL: "ê¸ˆ",    HH: 19, SS: 30, contents: "í•˜ë“œ 1ë²ˆ, ë…¸ë§ 1ë²ˆ ì”© ë¶€íƒë“œë¦½ë‹ˆë‹¤."}
   ,{name: "ê¸¸ë“œì‚¬ëƒ¥",       start: "Y", AA: 10, BB: "ì¼ì •", LL: "í† ",    HH: 19, SS: 30, contents: "í•˜ë“œ 1ë²ˆ, ë…¸ë§ 1ë²ˆ ì”© ë¶€íƒë“œë¦½ë‹ˆë‹¤."}

   ,{name: "ê³µì„±ì „",          start: "Y", AA: 30, BB: "ì¼ì •", LL: "ì¼",    HH: 20, SS: 50, contents: "30ë¶„ê¹Œì§€ëŠ” ì ‘ì†ì„ ê¼­ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\në””ìŠ¤ì½”ë“œ ì£¼ì†Œ : https://discord.gg/rCC9ZFbXpY \nê°€ëŠ¥í•˜ë©´ ì ‘ì†í•´ì£¼ì„¸ìš”."}
   ,{name: "ë¬´ë„íšŒ",          start: "Y", AA: 5, BB: "ì¼ì •", LL: "ì¼",    HH: 20, SS: 00, contents: "ë¬´ë„íšŒê°€ 5ë¶„ ë’¤ ì‹œì‘ë©ë‹ˆë‹¤!"}
];
      /*,{name: "í”¼ê³ ëª© ë„ê°",       start: "Y", AA: 10, BB: "ì¼ì •", LL: "ì¼",    HH: 19, SS: 30, contents: "í”¼ê³ ëª© 2ê°œì§€ì°¸~ \n(ì¼ë°˜)ê³ ëª© ì‚¬ìš©ê¸ˆì§€!\nìˆœì„œ ì§€ì¼œì£¼ì„¸ìš”~"}*/
function setCalendarNotice1(){   
   if(CalendarList1.length >= 1){
      for(j=0; j<CalendarList1.length; j++){
         var sub = CalendarList1[j];
         var nowTime = new Date();
         var setTime = new Date(nowTime.getFullYear(), nowTime.getMonth(), nowTime.getDate(), sub.HH, sub.SS, 0);
         var today = nowTime.getDay();
         var chk = setTime.getTime() - nowTime.getTime();
         chk = chk/1000/60;          
         if(sub.start == "Y" && sub.BB == "ì¼ì •" 
            && week[today] == sub.LL
            && Math.sign(chk) == -1){
            CalendarList1[j].start = "Y";
            if(CalendarList1[j].name == "ê¸¸ë“œë§¤ì¹­ì „") guildPvpList = [];
            return "";
         }   
      }
   }
   return "";
}
   /**
 * === ë°˜ë³µ ì•Œë¦¼ ========================================
 * ëª…ë ¹ì–´ : /ë°˜ë³µì‹œì‘@ê³µì„±ì „
 * ëª…ë ¹ì–´ : /ë°˜ë³µì¢…ë£Œ@ê³µì„±ì „
 */
 
var CalendarList2 = [
      {name: "ê³µì„±ì „",       start: "N", AA: 1, BB: "ë°˜ë³µ", LL: "ì¼",    HH: 20, SS: 50, contents: "** ğŸŒˆì´ë²ˆì£¼ ì¼ìš”ì¼ ê³µì„±ì „ì´ ìˆìŠµë‹ˆë‹¤ğŸŒˆ\n** <RainbowïŒˆê³µì§€ë°©>ì—ì„œ ì°¸ê°€ì—¬ë¶€ë¥¼ íˆ¬í‘œí•´ì£¼ì„¸ìš”!\n   ê³µì§€ë°© ë§í¬ëŠ” ìƒë‹¨ì˜ ê³µì§€ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.\n   ìš©ì‚¬ë‹˜ë“¤ì˜ í˜ì´ í•„ìš”í•©ë‹ˆë‹¤ !!"}
   ,{name: "ê¸¸ë“œë§¤ì¹­ì „",    start: "N", AA: 3, BB: "ë°˜ë³µ", LL: "ìˆ˜",    HH: 20, SS: 30, contents: "ê¸¸ë“œë§¤ì¹­ì „ì´ ìˆìŠµë‹ˆë‹¤.ğŸŒˆ\n ì°¸ê°€ ëª…ë ¹ì–´ë¡œ ì‹ ì²­ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\n ex) /ì‹ ì²­@ê¸°ì‚¬ or /ì‹ ì²­@ê¸°ì‚¬@í›„ë³´"}
];
function setCalendarNotice2(){   
   if(CalendarList2.length >= 1){
      for(j=0; j<CalendarList2.length; j++){
         var sub = CalendarList2[j];
         var nowTime = new Date();
         var setTime = new Date(nowTime.getFullYear(), nowTime.getMonth(), nowTime.getDate(), sub.HH, sub.SS, 0);
         var today = nowTime.getDay();
         var chk = setTime.getTime() - nowTime.getTime();
         chk = chk/1000/60;          
         if(sub.start == "Y" && sub.BB == "ë°˜ë³µ" 
            && week[today] == sub.LL
            && Math.sign(chk) == -1){
            CalendarList2[j].start = "N";                        
            return "";
         }else if(sub.start == "Y" && sub.BB == "ë°˜ë³µ"
            && nowTime.getHours() < 23 && nowTime.getHours() > 9
            && nowTime.getMinutes() < (sub.AA + 1) && nowTime.getMinutes() > (sub.AA - 1)){            
            var conts = "ë˜‘ë˜‘! ì•Œë ¤ë“œë¦½ë‹ˆë‹¤~\n";
               conts += "==== "+sub.name+" ====\n";
               conts += sub.contents;
            return conts;
         }   
      }
   }
   return "";
}function scheduleStart(msg){
   var txt = msg.split("@");   
   if(txt.length == 2){
      if(msg.indexOf("/ë°˜ë³µì‹œì‘") != -1){   
         for(j=0; j<CalendarList2.length; j++){
            var sub = CalendarList2[j];
            if(sub.BB == "ë°˜ë³µ" && sub.name.indexOf(txt[1]) != -1 && txt[1].length > 0){
               CalendarList2[j].start = "Y";
               return sub.name+" : ë°˜ë³µì•Œë¦¼ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.";
            }
            }
      }else if(msg.indexOf("/ë°˜ë³µì¢…ë£Œ") != -1){   
         for(j=0; j<CalendarList2.length; j++){
            var sub = CalendarList2[j];
            if(sub.BB == "ë°˜ë³µ" && sub.name.indexOf(txt[1]) != -1 && txt[1].length > 0){
               CalendarList2[j].start = "N";
               return sub.name+" : ë°˜ë³µì•Œë¦¼ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.";
            }
         }   
      }
      var texts = "ì˜ëª»ì…ë ¥í•˜ì‹ ê±° ê°™ì•„ìš”.. \n ë“±ë¡ëœ ì´ë²¤íŠ¸ëŠ” ";
      for(j=0; j<CalendarList2.length; j++){
         var sub = CalendarList2[j];
         if(j==0)
            texts += "'" + sub.name + "'";
         else
            texts += ", '" + sub.name + "'";
      }   
         texts += " ì…ë‹ˆë‹¤.";
      return texts;
   }else{
      return "ë­ í•œê°œ ë¹ ì§„ê²ƒ ê°™ì§€ ì•Šë‚˜ìš©? +_+ \n ì…ë ¥ë°©ë²• => /ë°˜ë³µì‹œì‘(ì¢…ë£Œ)@ì´ë²¤íŠ¸ëª…";
   }
}
var pvpguild ="";
function guildPvpmatch(msg){
   var txt = msg.split("@");
   if(msg.indexOf("/ê¸¸ë§¤ìƒëŒ€") != -1){
      if (txt.length == 2){
    pvpguild = txt[1];
       CalendarList2[1].contents = "ïŒˆì˜¤ëŠ˜ ê¸¸ë“œ ë§¤ì¹­ì „ ìƒëŒ€ëŠ” <"+pvpguild+'>ì…ë‹ˆë‹¤ïŒˆ \nëª…ë ¹ì–´ë¡œ ì‹ ì²­ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\n ex) /ì‹ ì²­@ê¸°ì‚¬ or /ì‹ ì²­@ê¸°ì‚¬@í›„ë³´';  
         return {
            pvpguild: pvpguild,
            text: "ê¸¸ë“œë§¤ì¹­ì „ ìƒëŒ€ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤. ["+pvpguild+"]"
         };
      }
      else{
         return {
            pvpguild: "",
            text: "ë­ í•œê°œ ë¹ ì§„ê²ƒ ê°™ì§€ ì•Šë‚˜ìš©? +_+ \n ì…ë ¥ë°©ë²• => /ê¸¸ë§¤ìƒëŒ€@ë ˆì¸ë½€ìš°"
         };
      }
   }
   return {
      pvpguild: "",
      text: "ì˜ëª»ì…ë ¥í•˜ì‹ ê±° ê°™ì•„ìš”.."
   };
}   
 

/**
 * === ê¸¸ë“œë§¤ì¹­ì „ ========================================
 * ëª…ë ¹ì–´ : /ì‹ ì²­@ê¸°ì‚¬@í›„ë³´    (ê·¸ë£¹ : ê¸°ì‚¬,ê¶ìˆ˜,í”„ë¦¬,ë„ì ,ìƒì¸,ë²•ì‚¬)
 * ëª…ë ¹ì–´ : /ì‹ ì²­ì·¨ì†Œ
 * ëª…ë ¹ì–´ : /ì‹ ì²­ì¡°íšŒ
 */
   var guildPvpList = [];
function guildPvpFn(msg, sender) {   
   if(msg.indexOf("/ì‹ ì²­ì·¨ì†Œ") != -1){
      for(j=0; j<guildPvpList.length; j++){
         var sub = guildPvpList[j];
         if(sender == sub.name){
            guildPvpList.splice(j, 1);
            return sender + " ë‹˜ ì‹ ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.";
         }   
      }   return sender + " ë‹˜ì˜ ì‹ ì²­ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.";
   }else if(msg.indexOf("/ì‹ ì²­ì¡°íšŒ") != -1){
      guildPvpList.sort(function(a, b) { // ì˜¤ë¦„ì°¨ìˆœ
         return a.clas < b.clas ? -1 : a.clas > b.clas ? 1 : 0;
      });   
      var prev = "";
      var texts = "ïŒˆì˜¤ëŠ˜ ê¸¸ë“œ ë§¤ì¹­ì „ ìƒëŒ€ëŠ” <"+pvpguild+'>ì…ë‹ˆë‹¤ïŒˆ \nëª…ë ¹ì–´ë¡œ ì‹ ì²­ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\n ex) /ì‹ ì²­@ê¸°ì‚¬ or /ì‹ ì²­@ê¸°ì‚¬@í›„ë³´';
      texts += "\n==== ì‹ ì²­ í˜„í™© ==== \n\n";
      for(j=0; j<guildPvpList.length; j++){
         if(j==0){
            prev = guildPvpList[j].clas;
            texts += "< " + guildPvpList[j].clas + " >\n";
            texts += " - " + guildPvpList[j].name;
            if (guildPvpList[j].conts != "")
               texts += " (" + guildPvpList[j].conts + ")\n";
            else   
               texts += " \n";
         }else{
            if(prev == guildPvpList[j].clas){
               texts += " - " + guildPvpList[j].name;
               if (guildPvpList[j].conts != "")
                  texts += " (" + guildPvpList[j].conts + ")\n";
               else   
                  texts += " \n";
            }else{
               prev = guildPvpList[j].clas;
               texts += "\n\n< " + guildPvpList[j].clas + " >\n";
               texts += " - " + guildPvpList[j].name;
               if (guildPvpList[j].conts != "")
                  texts += " (" + guildPvpList[j].conts + ")\n";
               else   
                  texts += " \n";
            }
         }   
         texts += "";
      }
      return texts;   }else if(msg.indexOf("/ì‹ ì²­") != -1){   
      var txt = msg.split("@");   
      for(j=0; j<guildPvpList.length; j++){
            if(guildPvpList[j].name == sender)
            return sender + " ë‹˜ì€ ì´ë¯¸ ì‹ ì²­í•˜ì…¨ë„¤ìš”~";
      }   
      var list = null;
      if(txt.length == 3){
         list = { name : sender, clas : txt[1], conts : txt[2]};         
      }else if(txt.length == 2){
         list = { name : sender, clas : txt[1], conts : ""};
      }else{
         return "ë­ í•œê°œ ë¹ ì§„ê²ƒ ê°™ì§€ ì•Šë‚˜ìš©? +_+ \n ì…ë ¥ë°©ë²• => /ì‹ ì²­@ì§ì—…@ê¸°íƒ€ \n (ì§ì—… : ê¸°ì‚¬,ê¶ìˆ˜,í”„ë¦¬,ë„ì ,ìƒì¸,ë²•ì‚¬)";
      }      
      guildPvpList.push(list);
      return sender + " ë‹˜ ì‹ ì²­ì™„ë£Œ! ì‘ì›í•©ë‹ˆë‹¤.";
   }else{
      var texts = "ì˜ëª»ì…ë ¥í•˜ì‹ ê±° ê°™ì•„ìš”..";
      return texts;
   }   
}

      /**
 * === ê³µì„±ì „ ========================================
 * ëª…ë ¹ì–´ : /ê³µì„±ì „ì‹ ì²­@ê¸°ì‚¬@ë”°ê¼¬(ë”œoríƒ±)   (ê·¸ë£¹ : ê¸°ì‚¬,ê¶ìˆ˜,í”„ë¦¬,ë„ì ,ìƒì¸,ë²•ì‚¬)
 * ëª…ë ¹ì–´ : /ê³µì„±ì „ì‚­ì œ@ë”°ê¼¬
 * ëª…ë ¹ì–´ : /ê³µì„±ì „í˜„í™©
 */
function guildCastleFn(msg) {
   
}      

/**
 * === íŒ¨ì¹˜ë…¸íŠ¸ =======================================
 * ëª…ë ¹ì–´ : /íŒ¨ì¹˜ë…¸íŠ¸
 */
function patchNote(){
   var txt = "ğŸŒˆ [ë”°ê¼¬ë´‡v1.1.4] íŒ¨ì¹˜ë…¸íŠ¸ (2022.11.02)\n";
   txt += " 1. í”¼ê³ ëª© ë„ê°íŒŒí‹°ê°€ ë‹¹ë¶„ê°„ ì¤‘ì§€ë©ë‹ˆë‹¤. ê´€ë ¨ ì•Œë¦¼ì´ êº¼ì¡ŒìŠµë‹ˆë‹¤.";
   txt += " 2. ë¬´ì§€ê°œ ì˜ ë‚˜ì˜¤ë‚˜ì—¼ ?";
   txt += "";
   txt += "";
   txt += "";
   txt += "";
   txt += "";
   txt += "";
   txt += "";
    txt += "";
   txt += "\nğŸŒˆ ë”°ê¼¬ë´‡ì€ Rainbow êµ¬ì„±ì› ëª¨ë‘ê°€ ì¢€ë” í¸í•˜ê³  ì¬ë°ŒëŠ” ê²Œì„ì„ ì§€í–¥í•©ë‹ˆë‹¤.\n";
   txt += "ğŸŒˆ ë”°ê¼¬ë´‡ì„ ë”ìš± ë˜‘ë˜‘í•˜ê²Œ ë§Œë“¤ ë‹¤ì–‘í•œ ì˜ê²¬ ê¸°ë‹¤ë¦½ë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.\n";
   txt += "ğŸŒˆ made by ì•„ì°Œë¦¬, ë”°ê¼¬ ğŸŒˆ";
   
   return txt;
}